# =====================================
# å·¥ä½œé…ç½®ç¤ºä¾‹
# =====================================
# å¤åˆ¶æ­¤æ–‡ä»¶ä¸º work.zsh å¹¶æ ¹æ®å®é™…æƒ…å†µä¿®æ”¹
# cp work.zsh.example work.zsh

# é¡¹ç›®è·¯å¾„ (å¯åœ¨ local.zsh ä¸­è¦†ç›–)
: ${PROJECT_DIR:="$HOME/Projects/MyApp"}

# ----- æ„å»º -----
alias build="./gradlew assembleDebug"
alias buildlog="./gradlew assembleDebug > build.log 2>&1 && echo 'âœ… Done' || echo 'âŒ Failed'"

# ----- APK å®‰è£… -----
install() { _adb_install "$PROJECT_DIR/app/build/outputs/apk/debug"; }

_adb_install() {
  local dir="$1"
  local apk=$(find "$dir" -name "*.apk" -type f -print0 2>/dev/null | xargs -0 ls -t 2>/dev/null | head -1)
  
  [[ -z "$apk" ]] && { echo "âŒ APK not found: $dir"; return 1; }
  
  echo "ğŸ“¦ Installing: $(basename "$apk")"
  adb install -r "$apk"
}

# ----- è‡ªå®šä¹‰å‡½æ•° -----
# æ·»åŠ ä½ çš„å·¥ä½œç›¸å…³å‡½æ•°...
